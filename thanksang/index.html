<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ativar Pixel TikTok</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: white;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .container {
            text-align: center;
            background: rgba(26, 26, 26, 0.9);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 400px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(45deg, #ff0050, #00f2ea);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }
        
        h2 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(0, 242, 234, 0.5);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        #pixelCode {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 5px;
            border: 2px solid #444;
            border-radius: 8px;
            text-align: center;
            background-color: #2a2a2a;
            color: #fff;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s;
        }
        
        #pixelCode:focus {
            outline: none;
            border-color: #00f2ea;
            box-shadow: 0 0 10px rgba(0, 242, 234, 0.5);
        }
        
        .instructions {
            font-size: 12px;
            color: #aaa;
            margin-top: 5px;
        }
        
        .btn {
            width: 100%;
            padding: 14px;
            margin-top: 10px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #ff0050, #00f2ea);
            color: #fff;
        }
        
        .add-to-cart {
            background: linear-gradient(45deg, #00f2ea, #ff0050);
            color: #fff;
        }
        
        .initiate-checkout {
            background: linear-gradient(45deg, #ff0050, #7c00ff);
            color: #fff;
        }
        
        .add-payment-info {
            background: linear-gradient(45deg, #00f2ea, #7c00ff);
            color: #fff;
        }
        
        .complete-payment {
            background: linear-gradient(45deg, #ff0050, #00f2ea, #7c00ff);
            color: #fff;
        }
        
        .footer {
            margin-top: 25px;
            font-size: 12px;
            color: #888;
        }
        
        .event-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(42, 42, 42, 0.8);
            font-size: 14px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">TT</div>
        <h2>Ativar Pixel do TikTok</h2>
        
        <div class="input-group">
            <input type="text" id="pixelCode" placeholder="Insira o ID do seu Pixel">
            <div class="instructions">Encontre este ID no seu TikTok Events Manager</div>
        </div>
        
        <button class="btn btn-primary" onclick="iniciarPixel()">Ativar Pixel</button>
        
        <div class="event-status" id="statusMessage"></div>
        
        <button class="btn add-to-cart" onclick="dispararAddToCart()">Add to Cart</button>
        <button class="btn initiate-checkout" onclick="dispararInitiateCheckout()">Initiate Checkout</button>
        <button class="btn add-payment-info" onclick="dispararAddPaymentInfo()">Add Payment Info</button>
        <button class="btn complete-payment" onclick="dispararCompletePayment()">Complete Payment</button>
        <button class="btn" onclick="enviarTodosEventosPadroes()">Enviar Todos Eventos</button>
        
        <div class="footer">
            Esta ferramenta é apenas para testes. Os eventos são enviados diretamente para o TikTok.
        </div>
    </div>

    <script>
        function showStatus(message, isError = false) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.style.display = 'block';
            statusEl.style.background = isError ? 'rgba(255, 50, 50, 0.2)' : 'rgba(50, 255, 50, 0.2)';
            
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 5000);
        }

        function iniciarPixel() {
            const pixelCode = document.getElementById('pixelCode').value.trim();
            if (pixelCode) {
                !function (w, d, t) {
                    w.TiktokAnalyticsObject = t; var ttq = w[t] = w[t] || [];
                    ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie", "holdConsent", "revokeConsent", "grantConsent"],
                    ttq.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } };
                    for (var i = 0; i < ttq.methods.length; i++) ttq.setAndDefer(ttq, ttq.methods[i]);
                    ttq.instance = function (t) {
                        for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++) ttq.setAndDefer(e, ttq.methods[n]);
                        return e
                    }, ttq.load = function (e, n) {
                        var r = "https://analytics.tiktok.com/i18n/pixel/events.js", o = n && n.partner;
                        ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = r, ttq._t = ttq._t || {}, ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {};
                        n = document.createElement("script"), n.type = "text/javascript", n.async = !0, n.src = r + "?sdkid=" + e + "&lib=" + t;
                        e = document.getElementsByTagName("script")[0]; e.parentNode.insertBefore(n, e)
                    };
                    ttq.load(pixelCode);
                    ttq.page();
                }(window, document, 'ttq');
                
                showStatus("Pixel ativado com sucesso! Agora você pode testar os eventos.");
            } else {
                showStatus("Por favor, insira o código do Pixel.", true);
            }
        }

        function dispararAddToCart() {
            if (window.ttq) {
                ttq.track('AddToCart');
                showStatus("Evento 'Add to Cart' disparado!");
            } else {
                showStatus("Por favor, ative o Pixel primeiro.", true);
            }
        }

        function dispararInitiateCheckout() {
            if (window.ttq) {
                ttq.track('InitiateCheckout');
                showStatus("Evento 'Initiate Checkout' disparado!");
            } else {
                showStatus("Por favor, ative o Pixel primeiro.", true);
            }
        }

        function dispararAddPaymentInfo() {
            if (window.ttq) {
                ttq.track('AddPaymentInfo');
                showStatus("Evento 'Add Payment Info' disparado!");
            } else {
                showStatus("Por favor, ative o Pixel primeiro.", true);
            }
        }

        function dispararCompletePayment() {
            if (window.ttq) {
                const valorAleatorio = (Math.random() * 100 + 1).toFixed(2);
                ttq.track('CompletePayment', { 
                    quantity: 1, 
                    description: "activate", 
                    content_type: "product", 
                    content_name: "ActivatePixel", 
                    currency: "BRL", 
                    value: valorAleatorio 
                });
                showStatus(`Evento 'Complete Payment' disparado com valor de R$${valorAleatorio}`);
            } else {
                showStatus("Por favor, ative o Pixel primeiro.", true);
            }
        }

        function enviarTodosEventosPadroes() {
            if (window.ttq) {
                const events = [
                    { name: 'AddToCart', params: {} },
                    { name: 'InitiateCheckout', params: {} },
                    { name: 'AddPaymentInfo', params: {} },
                    { name: 'CompletePayment', params: { quantity: 1, description: "activate", content_type: "product", content_name: "ActivatePixel", currency: "BRL", value: (Math.random() * 100 + 1).toFixed(2) }},
                    { name: 'ViewContent', params: { currency: 'BRL', value: 49.99 } }
                ];

                let index = 0;
                showStatus("Disparando eventos... Aguarde.");

                const triggerNextEvent = () => {
                    if (index < events.length) {
                        const event = events[index];
                        ttq.track(event.name, event.params);
                        index++;
                        setTimeout(triggerNextEvent, 800);
                    } else {
                        showStatus("Todos os eventos foram enviados com sucesso!");
                    }
                };

                triggerNextEvent();
            } else {
                showStatus("Pixel não ativado. Por favor, ative o pixel antes de enviar os eventos.", true);
            }
        }
    </script>
</body>
</html>
